<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <!-- general css -->
  <link type="text/css" rel="stylesheet" href="./css/map.css"></link>
  <!-- mapbox -->
  <script src="https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js"></script>
  <link href="https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.css" rel="stylesheet" />
  <!-- DLM -->
  <script src="./js/jquery-2.1.4.js"></script>
  <script src="./js/jquery.dlm.js"></script>
  <script src="./js/dirData.js"></script>
  <!-- tn3 -->
  <link type="text/css" rel="stylesheet" href="./skins/tn3/tn3.css"></link>
  <script type="text/javascript" src="js/jquery.tn3lite.min.js"></script>

</head>
<body>
  <button id="previous" class="button">previous</button>
  <button id="next" class="button">next</button>

  <div id="myMap"></div>
  <div id="info" class="info"></div>

  <script type="text/javascript" charset="utf-8">
    function getReq(variable){
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i=0; i<vars.length; i++){
        var pair = vars[i].split("=");
        if(pair[0] == variable)
          return pair[1];
      }
      return(false);
    }

    $(document).ready(function(){
      var mapName = getReq("mapName") ? getReq("mapName") : 0;
      var mapboxId = getReq("mapboxId") ? getReq("mapboxId") : "mapbox.streets";
      console.log("mapName: " + mapName);
      console.log("mapboxId: " + mapboxId);

      $("#myMap").dlm({
        //"token": "pk.eyJ1IjoieXNoaW5jMjEiLCJhIjoidGlBSzZEUSJ9.5Yq1DjgjbloJZe_TkJWVUA",
        //"mapboxId": "eleanor.ipncow29",
        "mapboxId": mapboxId,
        "dirData": dirData,
        "mapName": mapName
      });
      $("#myMap").dlm("show");

      var $mytn3 = $(".info").tn3({
        init_start:function(e){}
      }).data("tn3");
      $("#info").fadeOut();
    });

    document.getElementById("previous").addEventListener("click", function(){$("#myMap").dlm("previous")});
    document.getElementById("next").addEventListener("click", function(){$("#myMap").dlm("next")});
  </script>
</body>
</html>

